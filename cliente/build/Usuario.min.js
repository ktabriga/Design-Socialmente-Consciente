!function(){"use strict";function usuarioController(UsuarioModel,Notificacao,$state,$stateParams,$mdDialog){function init(){var id=$stateParams.idUsuario;id?UsuarioModel.find(id):UsuarioModel.findAll()}function editar(usuario){delete usuario.pass,vm.usuario=angular.copy(usuario)}function remover(usuario,evento){var confirm=$mdDialog.confirm().title("Tem certeza que deseja excluir o usuario "+usuario.nome+"?").content("Esta operaca nao pode ser revertida!").ariaLabel("Confirmar exclusao").ok("Confirmar").cancel("Cancelar").targetEvent(evento);$mdDialog.show(confirm).then(function(){UsuarioModel.remove(usuario._id)},function(){})}function salvar(usuario){vm.master=angular.copy(usuario),vm.master.hasOwnProperty("_id")?UsuarioModel.update(vm.master):UsuarioModel.create(vm.master)}var vm=this;vm.master={},vm.usuario={},vm.message="",vm.editar=editar,vm.remover=remover,vm.salvar=salvar,init(),Notificacao.addEventListener("usuario:find_all_success",function(event,data){_findAll.success(data)}),Notificacao.addEventListener("usuario:find_all_error",function(event,data){_findAll.error(data)}),Notificacao.addEventListener("usuario:find_success",function(event,data){_find.success(data)}),Notificacao.addEventListener("usuario:find_error",function(event,data){_find.error(data)}),Notificacao.addEventListener("usuario:create_success",function(event,data){_create.success(data)}),Notificacao.addEventListener("usuario:create_error",function(event,data){_create.error(data)}),Notificacao.addEventListener("usuario:update_success",function(event,data){_update.success(data)}),Notificacao.addEventListener("usuario:update_error",function(event,data){_update.error(data)}),Notificacao.addEventListener("usuario:remove_success",function(event,data){_remove.success(data)}),Notificacao.addEventListener("usuario:remove_error",function(event,data){_remove.error(data)}),Notificacao.removeEventListener("usuario:find_all_success",function(event,data){_findAll.success(data)}),Notificacao.removeEventListener("usuario:find_all_error",function(event,data){_findAll.error(data)}),Notificacao.removeEventListener("usuario:find_success",function(event,data){_find.success(data)}),Notificacao.removeEventListener("usuario:find_error",function(event,data){_find.error(data)}),Notificacao.removeEventListener("usuario:create_success",function(event,data){_create.success(data)}),Notificacao.removeEventListener("usuario:create_error",function(event,data){_create.error(data)}),Notificacao.removeEventListener("usuario:update_success",function(event,data){_update.success(data)}),Notificacao.removeEventListener("usuario:update_error",function(event,data){_update.error(data)}),Notificacao.removeEventListener("usuario:remove_success",function(event,data){_remove.success(data)}),Notificacao.removeEventListener("usuario:remove_error",function(event,data){_remove.error(data)});var _findAll={success:function(data){vm.usuarios=data},error:function(data){console.warn(data)}},_find={success:function(data){vm.usuario=data},error:function(data){console.warn(data)}},_create={success:function(data){vm.message="Usuário criado com sucesso",vm.usuarios.push(data),$state.go("app.usuario")},error:function(){}},_update={success:function(){vm.message="Usuário alterado com sucesso",UsuarioModel.findAll(),vm.usuario={},$state.go("app.usuario")},error:function(data){vm.message=data.message,console.warn(data)}},_remove={success:function(){vm.message="Usuário deletado com sucesso",UsuarioModel.findAll()},error:function(data){vm.message=data.message,console.warn(data)}}}angular.module("app.usuario").controller("UsuarioController",usuarioController),usuarioController.$inject=["UsuarioModel","Notificacao","$state","$stateParams","$mdDialog"]}(),function(){"use strict";function usuarioModel(UsuarioService,Notificacao){function findAll(){var _handleFindAll={success:function(result){Notificacao.notify("usuario:find_all_success",result.data)},error:function(error){Notificacao.notify("usuario:find_all_error",error.data),console.error("UserModel : User find all error")}};UsuarioService.findAll().then(_handleFindAll.success,_handleFindAll.error)}function find(id){var _handleFind={success:function(result){Notificacao.notify("usuario:find_success",result.data)},error:function(error){Notificacao.notify("usuario:find_error",error.data),console.error("UserModel : User find error")}};UsuarioService.find(id).then(_handleFind.success,_handleFind.error)}function create(data){var _handleCreate={success:function(result){Notificacao.notify("usuario:create_success",result.data)},error:function(error){Notificacao.notify("usuario:create_error",error.data),console.error("UserModel : User create error")}};UsuarioService.create(data).then(_handleCreate.success,_handleCreate.error)}function update(data){var _handleUpdate={success:function(result){Notificacao.notify("usuario:update_success",result.data)},error:function(error){Notificacao.notify("usuario:update_error",error.data),console.error("UserModel : User update error")}};UsuarioService.update(data).then(_handleUpdate.success,_handleUpdate.error)}function remove(id){var _handleRemove={success:function(result){Notificacao.notify("usuario:remove_success",result.data)},error:function(error){Notificacao.notify("usuario:remove_error",error.data),console.error("UserModel : User remove error")}};UsuarioService.remove(id).then(_handleRemove.success,_handleRemove.error)}var service={create:create,find:find,findAll:findAll,update:update,remove:remove};return service}angular.module("app.usuario").factory("UsuarioModel",usuarioModel),usuarioModel.$inject=["UsuarioService","Notificacao"]}(),function(){"use strict";function usuarioService($http){function findAll(){return $http.get(API_ROUTE).error(errorCallback)}function findByRole(){return $http.post(API_ROUTE.concat("/role")).error(errorCallback)}function find(id){return $http.get(API_ROUTE.concat("/").concat(id)).error(errorCallback)}function create(data){return $http.post(API_ROUTE,data).error(errorCallback)}function update(data){return $http.put(API_ROUTE.concat("/").concat(data._id),data).error(errorCallback)}function remove(id){return $http["delete"](API_ROUTE.concat("/").concat(id)).error(errorCallback)}function unique(data){return $http.post(API_ROUTE.concat("/unique"),data).error(errorCallback)}function errorCallback(){}var API_ROUTE="/api/usuarios",service={API_ROUTE:API_ROUTE,create:create,errorCallback:errorCallback,find:find,findAll:findAll,findByRole:findByRole,unique:unique,update:update,remove:remove};return service}angular.module("app.usuario").factory("UsuarioService",usuarioService),usuarioService.$inject=["$http"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInVzdWFyaW8uY29udHJvbGxlci5qcyIsInVzdWFyaW8ubW9kZWwuanMiLCJ1c3VhcmlvLnNlcnZpY2UuanMiXSwibmFtZXMiOlsidXN1YXJpb0NvbnRyb2xsZXIiLCJVc3VhcmlvTW9kZWwiLCJOb3RpZmljYWNhbyIsIiRzdGF0ZSIsIiRzdGF0ZVBhcmFtcyIsIiRtZERpYWxvZyIsImluaXQiLCJpZCIsImlkVXN1YXJpbyIsImZpbmQiLCJmaW5kQWxsIiwiZWRpdGFyIiwidXN1YXJpbyIsInBhc3MiLCJ2bSIsImFuZ3VsYXIiLCJjb3B5IiwicmVtb3ZlciIsImV2ZW50byIsImNvbmZpcm0iLCJ0aXRsZSIsIm5vbWUiLCJjb250ZW50IiwiYXJpYUxhYmVsIiwib2siLCJjYW5jZWwiLCJ0YXJnZXRFdmVudCIsInNob3ciLCJ0aGVuIiwicmVtb3ZlIiwiX2lkIiwic2FsdmFyIiwibWFzdGVyIiwiaGFzT3duUHJvcGVydHkiLCJ1cGRhdGUiLCJjcmVhdGUiLCJ0aGlzIiwibWVzc2FnZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImRhdGEiLCJfZmluZEFsbCIsInN1Y2Nlc3MiLCJlcnJvciIsIl9maW5kIiwiX2NyZWF0ZSIsIl91cGRhdGUiLCJfcmVtb3ZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsInVzdWFyaW9zIiwiY29uc29sZSIsIndhcm4iLCJwdXNoIiwiZ28iLCJtb2R1bGUiLCJjb250cm9sbGVyIiwiJGluamVjdCIsInVzdWFyaW9Nb2RlbCIsIlVzdWFyaW9TZXJ2aWNlIiwiX2hhbmRsZUZpbmRBbGwiLCJyZXN1bHQiLCJub3RpZnkiLCJfaGFuZGxlRmluZCIsIl9oYW5kbGVDcmVhdGUiLCJfaGFuZGxlVXBkYXRlIiwiX2hhbmRsZVJlbW92ZSIsInNlcnZpY2UiLCJmYWN0b3J5IiwidXN1YXJpb1NlcnZpY2UiLCIkaHR0cCIsImdldCIsIkFQSV9ST1VURSIsImVycm9yQ2FsbGJhY2siLCJmaW5kQnlSb2xlIiwicG9zdCIsImNvbmNhdCIsInB1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T0FtQkEsUUFBQTNELFdBQ0EsTUFBQTJELE9BQUFDLElBQUFDLFdBQ0E1QixNQUFBNkIsZUFHQSxRQUFBQyxjQUNBLE1BQUFKLE9BQUFLLEtBQUFILFVBQUFJLE9BQUEsVUFDQWhDLE1BQUE2QixlQUdBLFFBQUEvRCxNQUFBRixJQUNBLE1BQUE4RCxPQUFBQyxJQUFBQyxVQUFBSSxPQUFBLEtBQUFBLE9BQUFwRSxLQUNBb0MsTUFBQTZCLGVBR0EsUUFBQXJDLFFBQUFLLE1BQ0EsTUFBQTZCLE9BQUFLLEtBQUFILFVBQUEvQixNQUNBRyxNQUFBNkIsZUFHQSxRQUFBdEMsUUFBQU0sTUFDQSxNQUFBNkIsT0FBQU8sSUFBQUwsVUFBQUksT0FBQSxLQUFBQSxPQUFBbkMsS0FBQVYsS0FBQVUsTUFDQUcsTUFBQTZCLGVBR0EsUUFBQTNDLFFBQUF0QixJQUNBLE1BQUE4RCxPQUFBQSxVQUFBRSxVQUFBSSxPQUFBLEtBQUFBLE9BQUFwRSxLQUNBb0MsTUFBQTZCLGVBR0EsUUFBQUssUUFBQXJDLE1BQ0EsTUFBQTZCLE9BQUFLLEtBQUFILFVBQUFJLE9BQUEsV0FBQW5DLE1BQ0FHLE1BQUE2QixlQUdBLFFBQUFBLGtCQXBEQSxHQUFBRCxXQUFBLGdCQUVBTCxTQUNBSyxVQUFBQSxVQUNBcEMsT0FBQUEsT0FDQXFDLGNBQUFBLGNBQ0EvRCxLQUFBQSxLQUNBQyxRQUFBQSxRQUNBK0QsV0FBQUEsV0FDQUksT0FBQUEsT0FDQTNDLE9BQUFBLE9BQ0FMLE9BQUFBLE9BR0EsT0FBQXFDLFNBdEJBbkQsUUFDQXVDLE9BQUEsZUFDQWEsUUFBQSxpQkFBQUMsZ0JBRUFBLGVBQUFaLFNBQUEiLCJmaWxlIjoiVXN1YXJpby5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAudXN1YXJpbycpXG4gICAgLmNvbnRyb2xsZXIoJ1VzdWFyaW9Db250cm9sbGVyJywgdXN1YXJpb0NvbnRyb2xsZXIpO1xuXG4gIHVzdWFyaW9Db250cm9sbGVyLiRpbmplY3QgPSBbJ1VzdWFyaW9Nb2RlbCcsJ05vdGlmaWNhY2FvJywgJyRzdGF0ZScsICckc3RhdGVQYXJhbXMnLCAnJG1kRGlhbG9nJ107XG5cbiAgZnVuY3Rpb24gdXN1YXJpb0NvbnRyb2xsZXIoVXN1YXJpb01vZGVsLCBOb3RpZmljYWNhbywgJHN0YXRlLCAkc3RhdGVQYXJhbXMsICRtZERpYWxvZyl7XG4gICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICB2bS5tYXN0ZXIgICA9IHt9O1xuICAgIHZtLnVzdWFyaW8gID0ge307XG4gICAgdm0ubWVzc2FnZSAgPSAnJztcbiAgICB2bS5lZGl0YXIgICA9IGVkaXRhcjtcbiAgICB2bS5yZW1vdmVyICA9IHJlbW92ZXI7XG4gICAgdm0uc2FsdmFyICAgPSBzYWx2YXI7XG5cbiAgICBpbml0KCk7XG5cbiAgICAvLyBFdmVudCBMaXN0ZW5lclxuICAgIE5vdGlmaWNhY2FvLmFkZEV2ZW50TGlzdGVuZXIoJ3VzdWFyaW86ZmluZF9hbGxfc3VjY2VzcycsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7IF9maW5kQWxsLnN1Y2Nlc3MoZGF0YSk7ICB9KTtcbiAgICBOb3RpZmljYWNhby5hZGRFdmVudExpc3RlbmVyKCd1c3VhcmlvOmZpbmRfYWxsX2Vycm9yJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHsgX2ZpbmRBbGwuZXJyb3IoZGF0YSk7IH0pO1xuICAgIE5vdGlmaWNhY2FvLmFkZEV2ZW50TGlzdGVuZXIoJ3VzdWFyaW86ZmluZF9zdWNjZXNzJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHsgX2ZpbmQuc3VjY2VzcyhkYXRhKTsgIH0pO1xuICAgIE5vdGlmaWNhY2FvLmFkZEV2ZW50TGlzdGVuZXIoJ3VzdWFyaW86ZmluZF9lcnJvcicsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7IF9maW5kLmVycm9yKGRhdGEpOyB9KTtcbiAgICBOb3RpZmljYWNhby5hZGRFdmVudExpc3RlbmVyKCd1c3VhcmlvOmNyZWF0ZV9zdWNjZXNzJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHsgX2NyZWF0ZS5zdWNjZXNzKGRhdGEpOyAgfSk7XG4gICAgTm90aWZpY2FjYW8uYWRkRXZlbnRMaXN0ZW5lcigndXN1YXJpbzpjcmVhdGVfZXJyb3InLCBmdW5jdGlvbihldmVudCwgZGF0YSkgeyBfY3JlYXRlLmVycm9yKGRhdGEpOyB9KTtcbiAgICBOb3RpZmljYWNhby5hZGRFdmVudExpc3RlbmVyKCd1c3VhcmlvOnVwZGF0ZV9zdWNjZXNzJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHsgX3VwZGF0ZS5zdWNjZXNzKGRhdGEpOyAgfSk7XG4gICAgTm90aWZpY2FjYW8uYWRkRXZlbnRMaXN0ZW5lcigndXN1YXJpbzp1cGRhdGVfZXJyb3InLCBmdW5jdGlvbihldmVudCwgZGF0YSkgeyBfdXBkYXRlLmVycm9yKGRhdGEpOyB9KTtcbiAgICBOb3RpZmljYWNhby5hZGRFdmVudExpc3RlbmVyKCd1c3VhcmlvOnJlbW92ZV9zdWNjZXNzJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHsgX3JlbW92ZS5zdWNjZXNzKGRhdGEpOyAgfSk7XG4gICAgTm90aWZpY2FjYW8uYWRkRXZlbnRMaXN0ZW5lcigndXN1YXJpbzpyZW1vdmVfZXJyb3InLCBmdW5jdGlvbihldmVudCwgZGF0YSkgeyBfcmVtb3ZlLmVycm9yKGRhdGEpOyB9KTtcblxuICAgIC8vIEV2ZW50IGRlc3Ryb3lcbiAgICBOb3RpZmljYWNhby5yZW1vdmVFdmVudExpc3RlbmVyKCd1c3VhcmlvOmZpbmRfYWxsX3N1Y2Nlc3MnLCBmdW5jdGlvbihldmVudCwgZGF0YSkgeyBfZmluZEFsbC5zdWNjZXNzKGRhdGEpOyAgfSk7XG4gICAgTm90aWZpY2FjYW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcigndXN1YXJpbzpmaW5kX2FsbF9lcnJvcicsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7IF9maW5kQWxsLmVycm9yKGRhdGEpOyB9KTtcbiAgICBOb3RpZmljYWNhby5yZW1vdmVFdmVudExpc3RlbmVyKCd1c3VhcmlvOmZpbmRfc3VjY2VzcycsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7IF9maW5kLnN1Y2Nlc3MoZGF0YSk7ICB9KTtcbiAgICBOb3RpZmljYWNhby5yZW1vdmVFdmVudExpc3RlbmVyKCd1c3VhcmlvOmZpbmRfZXJyb3InLCBmdW5jdGlvbihldmVudCwgZGF0YSkgeyBfZmluZC5lcnJvcihkYXRhKTsgfSk7XG4gICAgTm90aWZpY2FjYW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcigndXN1YXJpbzpjcmVhdGVfc3VjY2VzcycsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7IF9jcmVhdGUuc3VjY2VzcyhkYXRhKTsgIH0pO1xuICAgIE5vdGlmaWNhY2FvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3VzdWFyaW86Y3JlYXRlX2Vycm9yJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHsgX2NyZWF0ZS5lcnJvcihkYXRhKTsgfSk7XG4gICAgTm90aWZpY2FjYW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcigndXN1YXJpbzp1cGRhdGVfc3VjY2VzcycsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7IF91cGRhdGUuc3VjY2VzcyhkYXRhKTsgIH0pO1xuICAgIE5vdGlmaWNhY2FvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3VzdWFyaW86dXBkYXRlX2Vycm9yJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHsgX3VwZGF0ZS5lcnJvcihkYXRhKTsgfSk7XG4gICAgTm90aWZpY2FjYW8ucmVtb3ZlRXZlbnRMaXN0ZW5lcigndXN1YXJpbzpyZW1vdmVfc3VjY2VzcycsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7IF9yZW1vdmUuc3VjY2VzcyhkYXRhKTsgIH0pO1xuICAgIE5vdGlmaWNhY2FvLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3VzdWFyaW86cmVtb3ZlX2Vycm9yJywgZnVuY3Rpb24oZXZlbnQsIGRhdGEpIHsgX3JlbW92ZS5lcnJvcihkYXRhKTsgfSk7XG5cbiAgICBmdW5jdGlvbiBpbml0KCl7XG4gICAgICB2YXIgaWQgPSAkc3RhdGVQYXJhbXMuaWRVc3VhcmlvO1xuICAgICAgaWYoaWQpIHtcbiAgICAgICAgVXN1YXJpb01vZGVsLmZpbmQoaWQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgVXN1YXJpb01vZGVsLmZpbmRBbGwoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBlZGl0YXIodXN1YXJpbykge1xuICAgICAgZGVsZXRlIHVzdWFyaW8ucGFzcztcbiAgICAgIHZtLnVzdWFyaW8gPSBhbmd1bGFyLmNvcHkodXN1YXJpbyk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVtb3Zlcih1c3VhcmlvLCBldmVudG8pIHtcbi8vICAgICAgaWYgKGNvbmZpcm0oJ1RlbSBjZXJ0ZXphIHF1ZSBkZXNlamEgcmVtb3ZlciBvIHVzdcOhcmlvICcrdXN1YXJpby5uYW1lKyc/JykpIHtcbi8vICAgICAgICBVc3VhcmlvTW9kZWwucmVtb3ZlKHVzdWFyaW8uaWQpO1xuLy8gICAgICB9XG4gICAgICB2YXIgY29uZmlybSA9ICRtZERpYWxvZy5jb25maXJtKClcbiAgICAgICAgLnRpdGxlKCdUZW0gY2VydGV6YSBxdWUgZGVzZWphIGV4Y2x1aXIgbyB1c3VhcmlvICcrIHVzdWFyaW8ubm9tZSArJz8nKVxuICAgICAgICAuY29udGVudCgnRXN0YSBvcGVyYWNhIG5hbyBwb2RlIHNlciByZXZlcnRpZGEhJylcbiAgICAgICAgLmFyaWFMYWJlbCgnQ29uZmlybWFyIGV4Y2x1c2FvJylcbiAgICAgICAgLm9rKCdDb25maXJtYXInKVxuICAgICAgICAuY2FuY2VsKCdDYW5jZWxhcicpXG4gICAgICAgIC50YXJnZXRFdmVudChldmVudG8pO1xuICAgICAgJG1kRGlhbG9nLnNob3coY29uZmlybSkudGhlbihmdW5jdGlvbigpIHtcbiAgICAgICAgVXN1YXJpb01vZGVsLnJlbW92ZSh1c3VhcmlvLl9pZCk7XG4gICAgICB9LCBmdW5jdGlvbigpIHtcblxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2FsdmFyKHVzdWFyaW8pIHtcbiAgICAgIHZtLm1hc3RlciA9IGFuZ3VsYXIuY29weSh1c3VhcmlvKTtcbiAgICAgIGlmICh2bS5tYXN0ZXIuaGFzT3duUHJvcGVydHkoJ19pZCcpKSB7XG4gICAgICAgIFVzdWFyaW9Nb2RlbC51cGRhdGUodm0ubWFzdGVyKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIFVzdWFyaW9Nb2RlbC5jcmVhdGUodm0ubWFzdGVyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBFdmVudCBsaXN0ZW5lciBmdW5jdGlvbnNcbiAgICB2YXIgX2ZpbmRBbGwgPSB7XG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIHZtLnVzdWFyaW9zID0gZGF0YTtcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICBjb25zb2xlLndhcm4oZGF0YSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBfZmluZCA9IHtcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgdm0udXN1YXJpbyA9IGRhdGE7XG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgY29uc29sZS53YXJuKGRhdGEpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgX2NyZWF0ZSA9IHtcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgdm0ubWVzc2FnZSA9ICdVc3XDoXJpbyBjcmlhZG8gY29tIHN1Y2Vzc28nO1xuICAgICAgICB2bS51c3Vhcmlvcy5wdXNoKGRhdGEpO1xuICAgICAgICAkc3RhdGUuZ28oJ2FwcC51c3VhcmlvJyk7XG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgLy9jb25zb2xlLndhcm4oZGF0YSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHZhciBfdXBkYXRlID0ge1xuICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICB2bS5tZXNzYWdlID0gJ1VzdcOhcmlvIGFsdGVyYWRvIGNvbSBzdWNlc3NvJztcbiAgICAgICAgVXN1YXJpb01vZGVsLmZpbmRBbGwoKTtcbiAgICAgICAgdm0udXN1YXJpbyA9IHt9O1xuICAgICAgICAkc3RhdGUuZ28oJ2FwcC51c3VhcmlvJyk7XG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgdm0ubWVzc2FnZSA9IGRhdGEubWVzc2FnZTtcbiAgICAgICAgY29uc29sZS53YXJuKGRhdGEpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICB2YXIgX3JlbW92ZSA9IHtcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgdm0ubWVzc2FnZSA9ICdVc3XDoXJpbyBkZWxldGFkbyBjb20gc3VjZXNzbyc7XG4gICAgICAgIFVzdWFyaW9Nb2RlbC5maW5kQWxsKCk7XG4gICAgICB9LFxuICAgICAgZXJyb3I6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgdm0ubWVzc2FnZSA9IGRhdGEubWVzc2FnZTtcbiAgICAgICAgY29uc29sZS53YXJuKGRhdGEpO1xuICAgICAgfVxuICAgIH07XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC51c3VhcmlvJylcbiAgICAuZmFjdG9yeSgnVXN1YXJpb01vZGVsJywgdXN1YXJpb01vZGVsKTtcblxuICB1c3VhcmlvTW9kZWwuJGluamVjdCA9IFsnVXN1YXJpb1NlcnZpY2UnLCAnTm90aWZpY2FjYW8nXTtcblxuICBmdW5jdGlvbiB1c3VhcmlvTW9kZWwoVXN1YXJpb1NlcnZpY2UsIE5vdGlmaWNhY2FvKSB7XG5cbiAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgIGNyZWF0ZSAgOiBjcmVhdGUsXG4gICAgICBmaW5kICAgIDogZmluZCxcbiAgICAgIGZpbmRBbGwgOiBmaW5kQWxsLFxuICAgICAgdXBkYXRlICA6IHVwZGF0ZSxcbiAgICAgIHJlbW92ZSAgOiByZW1vdmVcbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlcnZpY2U7XG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgZnVuY3Rpb24gZmluZEFsbCgpIHtcbiAgICAgIHZhciBfaGFuZGxlRmluZEFsbCA9IHtcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgTm90aWZpY2FjYW8ubm90aWZ5KCd1c3VhcmlvOmZpbmRfYWxsX3N1Y2Nlc3MnLCByZXN1bHQuZGF0YSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnJvcil7XG4gICAgICAgICAgTm90aWZpY2FjYW8ubm90aWZ5KCd1c3VhcmlvOmZpbmRfYWxsX2Vycm9yJywgZXJyb3IuZGF0YSk7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignVXNlck1vZGVsIDogVXNlciBmaW5kIGFsbCBlcnJvcicpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBVc3VhcmlvU2VydmljZS5maW5kQWxsKCkudGhlbihfaGFuZGxlRmluZEFsbC5zdWNjZXNzLCBfaGFuZGxlRmluZEFsbC5lcnJvcik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZmluZChpZCkge1xuICAgICAgdmFyIF9oYW5kbGVGaW5kID0ge1xuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgICAgIE5vdGlmaWNhY2FvLm5vdGlmeSgndXN1YXJpbzpmaW5kX3N1Y2Nlc3MnLCByZXN1bHQuZGF0YSk7XG4gICAgICAgIH0sXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbihlcnJvcil7XG4gICAgICAgICAgTm90aWZpY2FjYW8ubm90aWZ5KCd1c3VhcmlvOmZpbmRfZXJyb3InLCBlcnJvci5kYXRhKTtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdVc2VyTW9kZWwgOiBVc2VyIGZpbmQgZXJyb3InKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgVXN1YXJpb1NlcnZpY2UuZmluZChpZCkudGhlbihfaGFuZGxlRmluZC5zdWNjZXNzLCBfaGFuZGxlRmluZC5lcnJvcik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlKGRhdGEpIHtcbiAgICAgIHZhciBfaGFuZGxlQ3JlYXRlID0ge1xuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgICAgIE5vdGlmaWNhY2FvLm5vdGlmeSgndXN1YXJpbzpjcmVhdGVfc3VjY2VzcycsIHJlc3VsdC5kYXRhKTtcbiAgICAgICAgfSxcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKGVycm9yKXtcbiAgICAgICAgICBOb3RpZmljYWNhby5ub3RpZnkoJ3VzdWFyaW86Y3JlYXRlX2Vycm9yJywgZXJyb3IuZGF0YSk7XG4gICAgICAgICAgY29uc29sZS5lcnJvcignVXNlck1vZGVsIDogVXNlciBjcmVhdGUgZXJyb3InKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgVXN1YXJpb1NlcnZpY2UuY3JlYXRlKGRhdGEpLnRoZW4oX2hhbmRsZUNyZWF0ZS5zdWNjZXNzLCBfaGFuZGxlQ3JlYXRlLmVycm9yKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGUoZGF0YSkge1xuICAgICAgdmFyIF9oYW5kbGVVcGRhdGUgPSB7XG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgICAgICAgTm90aWZpY2FjYW8ubm90aWZ5KCd1c3VhcmlvOnVwZGF0ZV9zdWNjZXNzJywgcmVzdWx0LmRhdGEpO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyb3Ipe1xuICAgICAgICAgIE5vdGlmaWNhY2FvLm5vdGlmeSgndXN1YXJpbzp1cGRhdGVfZXJyb3InLCBlcnJvci5kYXRhKTtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdVc2VyTW9kZWwgOiBVc2VyIHVwZGF0ZSBlcnJvcicpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBVc3VhcmlvU2VydmljZS51cGRhdGUoZGF0YSkudGhlbihfaGFuZGxlVXBkYXRlLnN1Y2Nlc3MsIF9oYW5kbGVVcGRhdGUuZXJyb3IpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbW92ZShpZCkge1xuICAgICAgdmFyIF9oYW5kbGVSZW1vdmUgPSB7XG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgICAgICAgTm90aWZpY2FjYW8ubm90aWZ5KCd1c3VhcmlvOnJlbW92ZV9zdWNjZXNzJywgcmVzdWx0LmRhdGEpO1xuICAgICAgICB9LFxuICAgICAgICBlcnJvcjogZnVuY3Rpb24oZXJyb3Ipe1xuICAgICAgICAgIE5vdGlmaWNhY2FvLm5vdGlmeSgndXN1YXJpbzpyZW1vdmVfZXJyb3InLCBlcnJvci5kYXRhKTtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdVc2VyTW9kZWwgOiBVc2VyIHJlbW92ZSBlcnJvcicpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICBVc3VhcmlvU2VydmljZS5yZW1vdmUoaWQpLnRoZW4oX2hhbmRsZVJlbW92ZS5zdWNjZXNzLCBfaGFuZGxlUmVtb3ZlLmVycm9yKTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcC51c3VhcmlvJylcbiAgICAuZmFjdG9yeSgnVXN1YXJpb1NlcnZpY2UnLCB1c3VhcmlvU2VydmljZSk7XG5cbiAgdXN1YXJpb1NlcnZpY2UuJGluamVjdCA9IFsnJGh0dHAnXTtcblxuICBmdW5jdGlvbiB1c3VhcmlvU2VydmljZSgkaHR0cCkge1xuXG4gICAgdmFyIEFQSV9ST1VURSA9ICcvYXBpL3VzdWFyaW9zJztcblxuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgQVBJX1JPVVRFICAgICA6IEFQSV9ST1VURSxcbiAgICAgIGNyZWF0ZSAgICAgICAgOiBjcmVhdGUsXG4gICAgICBlcnJvckNhbGxiYWNrIDogZXJyb3JDYWxsYmFjayxcbiAgICAgIGZpbmQgICAgICAgICAgOiBmaW5kLFxuICAgICAgZmluZEFsbCAgICAgICA6IGZpbmRBbGwsXG4gICAgICBmaW5kQnlSb2xlICAgIDogZmluZEJ5Um9sZSxcbiAgICAgIHVuaXF1ZSAgICAgICAgOiB1bmlxdWUsXG4gICAgICB1cGRhdGUgICAgICAgIDogdXBkYXRlLFxuICAgICAgcmVtb3ZlICAgICAgICA6IHJlbW92ZVxuICAgIH07XG5cbiAgICByZXR1cm4gc2VydmljZTtcbiAgICAvLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgZnVuY3Rpb24gZmluZEFsbCgpIHtcbiAgICAgIHJldHVybiAkaHR0cC5nZXQoQVBJX1JPVVRFKS5cbiAgICAgICAgZXJyb3IoZXJyb3JDYWxsYmFjayk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZmluZEJ5Um9sZShyb2xlKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdChBUElfUk9VVEUuY29uY2F0KCcvcm9sZScpKS5cbiAgICAgICAgZXJyb3IoZXJyb3JDYWxsYmFjayk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZmluZChpZCkge1xuICAgICAgcmV0dXJuICRodHRwLmdldChBUElfUk9VVEUuY29uY2F0KCcvJykuY29uY2F0KGlkKSkuXG4gICAgICAgIGVycm9yKGVycm9yQ2FsbGJhY2spO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZShkYXRhKSB7XG4gICAgICByZXR1cm4gJGh0dHAucG9zdChBUElfUk9VVEUsIGRhdGEpLlxuICAgICAgICBlcnJvcihlcnJvckNhbGxiYWNrKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGUoZGF0YSl7XG4gICAgICByZXR1cm4gJGh0dHAucHV0KEFQSV9ST1VURS5jb25jYXQoJy8nKS5jb25jYXQoZGF0YS5faWQpLCBkYXRhKS5cbiAgICAgICAgZXJyb3IoZXJyb3JDYWxsYmFjayk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVtb3ZlKGlkKSB7XG4gICAgICByZXR1cm4gJGh0dHAuZGVsZXRlKEFQSV9ST1VURS5jb25jYXQoJy8nKS5jb25jYXQoaWQpKS5cbiAgICAgICAgZXJyb3IoZXJyb3JDYWxsYmFjayk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdW5pcXVlKGRhdGEpIHtcbiAgICAgIHJldHVybiAkaHR0cC5wb3N0KEFQSV9ST1VURS5jb25jYXQoJy91bmlxdWUnKSwgZGF0YSkuXG4gICAgICAgIGVycm9yKGVycm9yQ2FsbGJhY2spO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGVycm9yQ2FsbGJhY2soZXJyb3IpIHtcbiAgICAgIC8vY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgfVxuICB9XG59KSgpO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9