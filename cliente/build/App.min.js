!function(){"use strict";angular.module("app.problema",["ui.router","oc.lazyLoad"])}(),function(){"use strict";angular.module("app.usuario",["ui.router","oc.lazyLoad"])}(),function(){"use strict";angular.module("app",["app.usuario","app.problema","ui.router","oc.lazyLoad","ngMaterial","toaster"])}(),function(){"use strict";function r(r,e,o,t,a){r.html5Mode(!0);var n=[{name:"app.usuario",files:["build/Usuario.min.js"]},{name:"app.problema",files:["build/Problema.min.js"]}],i=[],u={modulos:n,scripts:i};o.constant("APP_CONFIG",u),e.config({debug:!1,events:!0,modules:n}),t.theme("default").primaryPalette("teal").accentPalette("indigo"),a.interceptors.push("Interceptador")}angular.module("app").config(r),r.$inject=["$locationProvider","$ocLazyLoadProvider","$provide","$mdThemingProvider","$httpProvider"]}(),function(){"use strict";function r(r,t){r.otherwise("/"),t.state("app.problema",{url:"problema",views:{conteudo:{templateUrl:e("problema/listar"),controller:"ProblemaController",controllerAs:"vm",resolve:o("app.problema")}}}).state("app.problemaCadastrar",{url:"problema/cadastrar",views:{conteudo:{templateUrl:e("problema/form"),controller:"ProblemaController",controllerAs:"vm",resolve:o("app.problema")}}}).state("app.problemaEditar",{url:"problema/editar/:idProblema",views:{conteudo:{templateUrl:e("problema/form"),controller:"ProblemaController",controllerAs:"vm",resolve:o("app.problema")}}})}function e(r){return"/api/templates/"+r}function o(){var r=arguments;return{lazyLoad:["RotasService",function(e){return e.load(r)}]}}angular.module("app.problema").config(r),r.$inject=["$urlRouterProvider","$stateProvider"]}(),function(){"use strict";function r(r,t){r.otherwise("/"),t.state("app.usuario",{url:"usuario",views:{conteudo:{templateUrl:e("usuario/listar"),controller:"UsuarioController",controllerAs:"vm",resolve:o("app.usuario")}}}).state("app.usuarioCadastrar",{url:"usuario/cadastrar",views:{conteudo:{templateUrl:e("usuario/form"),controller:"UsuarioController",controllerAs:"vm",resolve:o("app.usuario")}}}).state("app.usuarioEditar",{url:"usuario/editar/:idUsuario",views:{conteudo:{templateUrl:e("usuario/form"),controller:"UsuarioController",controllerAs:"vm",resolve:o("app.usuario")}}})}function e(r){return"/api/templates/"+r}function o(){var r=arguments;return{lazyLoad:["RotasService",function(e){return e.load(r)}]}}angular.module("app.usuario").config(r),r.$inject=["$urlRouterProvider","$stateProvider"]}(),function(){"use strict";function r(r,a){r.otherwise("/inicio"),a.state("app",{url:"/","abstract":!0,controller:"AppController",controllerAs:"vm",templateUrl:e("principal"),resolve:t()}).state("app.inicio",{url:"inicio",template:"<h1>Inicio</h1>"}).state("login",{url:"/login",templateUrl:e("login"),controller:"LoginController",controllerAs:"vm",resolve:o("app.usuario")}).state("registrar",{url:"/registrar",templateUrl:e("registrar"),controller:"LoginController",controllerAs:"vm",resolve:o("app.usuario")})}function e(r){return"/api/templates/"+r}function o(){var r=arguments;return{lazyLoad:["RotasService",function(e){return e.load(r)}]}}function t(){return{autenticar:["$window","$location",function(r,e){r.localStorage.token||e.path("/login")}]}}angular.module("app").config(r),r.$inject=["$urlRouterProvider","$stateProvider"]}(),function(){"use strict";function r(r){function e(){r("menuPrincipal").toggle().then(function(){})}var o=this;o.mostrarMenu=e}angular.module("app").controller("AppController",r),r.$inject=["$mdSidenav"]}(),function(){"use strict";function r(r,e,o,t){function a(r){return r.headers=r.headers||{},e.localStorage.token&&(r.headers.Authorization="Bearer "+e.localStorage.token),r}function n(e){return 401===e.status&&(o.path("/login"),t.pop("error","Erro!",e.data.mensagem)),t.pop("error","Ocorreu um Erro",e.data.mensagem),r.reject(e.data.mensagem)}var i={request:a,responseError:n};return i}angular.module("app").factory("Interceptador",r),r.$inject=["$q","$window","$location","toaster"]}(),function(){"use strict";function r(r,e,o,t,a){function n(t){r.post("./api/autenticacao",t).success(function(r){e.localStorage.token=r.token,o.go("app.inicio")}).error(function(){delete e.localStorage.token})}function i(r){t.create(r)}var u=this;u.logar=n,u.salvarUsuario=i,a.addEventListener("usuario:create_success",function(r,e){l.success(e)}),a.addEventListener("usuario:create_error",function(r,e){l.error(e)});var l={success:function(){u.message="Usuário criado com sucesso",o.go("login")},error:function(r){u.message=r.message,console.warn(r)}}}angular.module("app").controller("LoginController",r),r.$inject=["$http","$window","$state","UsuarioModel","Notificacao"]}(),function(){"use strict";function r(){function r(r,e){t[r]||(t[r]=[]),t[r].push(e)}function e(r,e){if(t[r]){var o=t[r].indexOf(e);-1!==o&&t[r].splice(o,1)}}function o(){var r;if("string"!=typeof arguments[0])console.warn("Notification","Primeiro parâmetro deve ser um nome de evento (String)");else{r=t[arguments[0]];for(var e in r)r[e].apply(null,arguments)}}var t={},a={_listeners:t,addEventListener:r,notify:o,removeEventListener:e};return a}angular.module("app").factory("Notificacao",r)}(),function(){"use strict";function r(r,e,o){function t(o){function t(e){return u.then("function"==typeof e?e:function(){var o=i(e);return o?r.load(o):$.error("Route resolve: Bad resource name ["+e+"]")})}function i(r){if(a)for(var e in a)if(a[e].name&&a[e].name===r)return a[e];return n&&n[r]}for(var u=e.when(1),l=0,s=o.length;s>l;l++)u=t(o[l]);return u}var a=o.modulos,n=o.scripts,i={load:t};return i}angular.module("app").service("RotasService",r),r.$inject=["$ocLazyLoad","$q","APP_CONFIG"]}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlByb2JsZW1hL3Byb2JsZW1hLm1vZHVsby5qcyIsIlVzdWFyaW8vdXN1YXJpby5tb2R1bG8uanMiLCJhcHAubW9kdWxvLmpzIiwiYXBwLmNvbmZpZ3VyYWNvZXMuanMiLCJQcm9ibGVtYS9wcm9ibGVtYS5yb3Rhcy5qcyIsIlVzdWFyaW8vdXN1YXJpby5yb3Rhcy5qcyIsImFwcC5yb3Rhcy5qcyIsImFwcC5jb250cm9sbGVyLmpzIiwiYXBwLmludGVyY2VwdGFkb3IuanMiLCJhcHAubG9naW4uY29udHJvbGxlci5qcyIsImFwcC5ub3RpZmljYWNhby5qcyIsImFwcC5yb3Rhcy5zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWd1cmFjb2VzIiwiJGxvY2F0aW9uUHJvdmlkZXIiLCIkb2NMYXp5TG9hZFByb3ZpZGVyIiwiJHByb3ZpZGUiLCIkbWRUaGVtaW5nUHJvdmlkZXIiLCIkaHR0cFByb3ZpZGVyIiwiaHRtbDVNb2RlIiwibW9kdWxvcyIsIm5hbWUiLCJmaWxlcyIsInNjcmlwdHMiLCJhcHBDb25maWciLCJjb25zdGFudCIsImNvbmZpZyIsImRlYnVnIiwiZXZlbnRzIiwibW9kdWxlcyIsInRoZW1lIiwicHJpbWFyeVBhbGV0dGUiLCJhY2NlbnRQYWxldHRlIiwiaW50ZXJjZXB0b3JzIiwicHVzaCIsIiRpbmplY3QiLCJyb3RhcyIsIiR1cmxSb3V0ZXJQcm92aWRlciIsIiRzdGF0ZVByb3ZpZGVyIiwib3RoZXJ3aXNlIiwic3RhdGUiLCJ1cmwiLCJ2aWV3cyIsImNvbnRldWRvIiwidGVtcGxhdGVVcmwiLCJiYXNlcGF0aCIsImNvbnRyb2xsZXIiLCJjb250cm9sbGVyQXMiLCJyZXNvbHZlIiwibGF6eUxvYWQiLCJ1cmkiLCJfYXJncyIsImFyZ3VtZW50cyIsIlJvdGFzU2VydmljZSIsImxvYWQiLCJhYnN0cmFjdCIsImF1dGVudGljYXIiLCJ0ZW1wbGF0ZSIsIiR3aW5kb3ciLCIkbG9jYXRpb24iLCJsb2NhbFN0b3JhZ2UiLCJ0b2tlbiIsInBhdGgiLCJhcHBDb250cm9sbGVyIiwiJG1kU2lkZW5hdiIsIm1vc3RyYXJNZW51IiwidG9nZ2xlIiwidGhlbiIsInZtIiwidGhpcyIsImludGVyY2VwdGFkb3IiLCIkcSIsInRvYXN0ZXIiLCJyZXF1ZXN0IiwiaGVhZGVycyIsInJlc3BvbnNlRXJyb3IiLCJyZXNwb25zZSIsInN0YXR1cyIsInBvcCIsImRhdGEiLCJtZW5zYWdlbSIsInJlamVjdCIsInNlcnZpY2UiLCJmYWN0b3J5IiwibG9naW5Db250cm9sbGVyIiwiJGh0dHAiLCIkc3RhdGUiLCJVc3VhcmlvTW9kZWwiLCJOb3RpZmljYWNhbyIsImxvZ2FyIiwidXN1YXJpbyIsInBvc3QiLCJzdWNjZXNzIiwiZ28iLCJlcnJvciIsInNhbHZhclVzdWFyaW8iLCJjcmVhdGUiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJfY3JlYXRlIiwibWVzc2FnZSIsImNvbnNvbGUiLCJ3YXJuIiwibm90aWZpY2FjYW8iLCJsaXN0ZW5lciIsIl9saXN0ZW5lcnMiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiaW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwibm90aWZ5IiwibGlzdGVuZXJzIiwia2V5IiwiYXBwbHkiLCJyb3Rhc1NlcnZpY2UiLCIkb2NMTCIsImFuZFRoZW4iLCJfYXJnIiwicHJvbWlzZSIsIndoYXRUb0xvYWQiLCJnZXRSZXF1aXJlZCIsIiQiLCJtIiwid2hlbiIsImkiLCJsZW4iLCJsZW5ndGgiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0EsWUFFQUEsU0FDQUMsT0FBQSxnQkFDQSxZQUFBLG1CQ0xBLFdBQ0EsWUFFQUQsU0FDQUMsT0FBQSxlQUNBLFlBQUEsbUJDTEEsV0FDQSxZQUVBRCxTQUNBQyxPQUFBLE9BQ0EsY0FBQSxlQUFBLFlBQUEsY0FBQSxhQUFBLGVDTEEsV0FDQSxZQVFBLFNBQUFDLEdBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEVBQUFDLEdBQ0FKLEVBQUFLLFdBQUEsRUFLQSxJQUFBQyxLQUNBQyxLQUFB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V0FDQSxZQVFBLFNBQUFXLEdBQUFDLEVBQUE1QyxFQUFBL0MsR0FZQSxRQUFBOEIsR0FBQUgsR0FRQSxRQUFBaUUsR0FBQUMsR0FFQSxNQUNBQyxHQUFBbkQsS0FEQSxrQkFBQWtELEdBQ0FBLEVBR0EsV0FFQSxHQUFBRSxHQUFBQyxFQUFBSCxFQUVBLE9BQUFFLEdBSUFKLEVBQUE3RCxLQUFBaUUsR0FIQUUsRUFBQTNCLE1BQUEscUNBQUF1QixFQUFBLE9BVUEsUUFBQUcsR0FBQW5HLEdBQ0EsR0FBQUQsRUFDQSxJQUFBLEdBQUFzRyxLQUFBdEcsR0FDQSxHQUFBQSxFQUFBc0csR0FBQXJHLE1BQUFELEVBQUFzRyxHQUFBckcsT0FBQUEsRUFDQSxNQUFBRCxHQUFBc0csRUFJQSxPQUFBbkcsSUFBQUEsRUFBQUYsR0FuQ0EsSUFBQSxHQURBaUcsR0FBQS9DLEVBQUFvRCxLQUFBLEdBQ0FDLEVBQUEsRUFBQUMsRUFBQTFFLEVBQUEyRSxPQUFBRCxFQUFBRCxFQUFBQSxJQUNBTixFQUFBRixFQUFBakUsRUFBQXlFLEdBRUEsT0FBQU4sR0FmQSxHQUFBbEcsR0FBQUksRUFBQUosUUFDQUcsRUFBQUMsRUFBQUQsUUFFQTJELEdBQ0E1QixLQUFBQSxFQUdBLE9BQUE0QixHQWZBdkUsUUFDQUMsT0FBQSxPQUNBc0UsUUFBQSxlQUFBZ0MsR0FFQUEsRUFBQS9FLFNBQUEsY0FBQSxLQUFBIiwiZmlsZSI6IkFwcC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLnByb2JsZW1hJyxbXG4gICAgICAndWkucm91dGVyJywgICdvYy5sYXp5TG9hZCdcbiAgICBdKTtcblxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAudXN1YXJpbycsW1xuICAgICAgJ3VpLnJvdXRlcicsICAnb2MubGF6eUxvYWQnXG4gICAgXSk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJyxbXG4gICAgICAnYXBwLnVzdWFyaW8nLCAnYXBwLnByb2JsZW1hJywgJ3VpLnJvdXRlcicsICAnb2MubGF6eUxvYWQnLCAnbmdNYXRlcmlhbCcsICd0b2FzdGVyJ1xuICAgIF0pO1xuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuY29uZmlnKGNvbmZpZ3VyYWNvZXMpO1xuXG4gIGNvbmZpZ3VyYWNvZXMuJGluamVjdCA9IFsnJGxvY2F0aW9uUHJvdmlkZXInLCAnJG9jTGF6eUxvYWRQcm92aWRlcicsICckcHJvdmlkZScsICckbWRUaGVtaW5nUHJvdmlkZXInLCAnJGh0dHBQcm92aWRlciddO1xuXG4gIGZ1bmN0aW9uIGNvbmZpZ3VyYWNvZXMoJGxvY2F0aW9uUHJvdmlkZXIsICRvY0xhenlMb2FkUHJvdmlkZXIsICRwcm92aWRlLCAkbWRUaGVtaW5nUHJvdmlkZXIsICRodHRwUHJvdmlkZXIpe1xuICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcblxuICAgIC8vIExBWlkgTU9EVUxFU1xuICAgIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgICB2YXIgbW9kdWxvcyA9IFtcbiAgICAgIHsgbmFtZTogJ2FwcC51c3VhcmlvJyAsIGZpbGVzOiBbJ2J1aWxkL1VzdWFyaW8ubWluLmpzJ10gfSxcbiAgICAgIHsgbmFtZTogJ2FwcC5wcm9ibGVtYScgLCBmaWxlczogWydidWlsZC9Qcm9ibGVtYS5taW4uanMnXSB9XG4gICAgXTtcblxuICAgIHZhciBzY3JpcHRzID0gW107XG5cbiAgICB2YXIgYXBwQ29uZmlnID0ge1xuICAgICAgbW9kdWxvczogbW9kdWxvcyxcbiAgICAgIHNjcmlwdHM6IHNjcmlwdHNcbiAgICB9O1xuICAgICRwcm92aWRlLmNvbnN0YW50KCdBUFBfQ09ORklHJywgYXBwQ29uZmlnKTtcblxuICAgICRvY0xhenlMb2FkUHJvdmlkZXIuY29uZmlnKHtcbiAgICAgIGRlYnVnOiBmYWxzZSxcbiAgICAgIGV2ZW50czogdHJ1ZSxcbiAgICAgIG1vZHVsZXM6IG1vZHVsb3NcbiAgICB9KTtcblxuICAgICRtZFRoZW1pbmdQcm92aWRlci50aGVtZSgnZGVmYXVsdCcpXG4gICAgICAucHJpbWFyeVBhbGV0dGUoJ3RlYWwnKVxuICAgICAgLmFjY2VudFBhbGV0dGUoJ2luZGlnbycpO1xuXG4gICAgJGh0dHBQcm92aWRlci5pbnRlcmNlcHRvcnMucHVzaChcIkludGVyY2VwdGFkb3JcIik7XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLnByb2JsZW1hJylcbiAgICAuY29uZmlnKHJvdGFzKTtcblxuICByb3Rhcy4kaW5qZWN0ID0gWyckdXJsUm91dGVyUHJvdmlkZXInLCAnJHN0YXRlUHJvdmlkZXInXTtcblxuICBmdW5jdGlvbiByb3RhcygkdXJsUm91dGVyUHJvdmlkZXIsICRzdGF0ZVByb3ZpZGVyKXtcbiAgICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKFwiL1wiKTtcbiAgICAkc3RhdGVQcm92aWRlclxuICAgICAgLnN0YXRlKCdhcHAucHJvYmxlbWEnLCB7XG4gICAgICAgIHVybDogXCJwcm9ibGVtYVwiLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgIGNvbnRldWRvOiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogYmFzZXBhdGgoXCJwcm9ibGVtYS9saXN0YXJcIiksXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUHJvYmxlbWFDb250cm9sbGVyJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHJlc29sdmU6IGxhenlMb2FkKCdhcHAucHJvYmxlbWEnKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5zdGF0ZSgnYXBwLnByb2JsZW1hQ2FkYXN0cmFyJywge1xuICAgICAgICB1cmw6IFwicHJvYmxlbWEvY2FkYXN0cmFyXCIsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgY29udGV1ZG86IHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBiYXNlcGF0aChcInByb2JsZW1hL2Zvcm1cIiksXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUHJvYmxlbWFDb250cm9sbGVyJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHJlc29sdmU6IGxhenlMb2FkKCdhcHAucHJvYmxlbWEnKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5zdGF0ZSgnYXBwLnByb2JsZW1hRWRpdGFyJywge1xuICAgICAgICB1cmw6IFwicHJvYmxlbWEvZWRpdGFyLzppZFByb2JsZW1hXCIsXG4gICAgICAgIHZpZXdzOiB7XG4gICAgICAgICAgY29udGV1ZG86IHtcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiBiYXNlcGF0aChcInByb2JsZW1hL2Zvcm1cIiksXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUHJvYmxlbWFDb250cm9sbGVyJyxcbiAgICAgICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgICAgIHJlc29sdmU6IGxhenlMb2FkKCdhcHAucHJvYmxlbWEnKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBiYXNlcGF0aCh1cmkpIHtcbiAgICByZXR1cm4gJy9hcGkvdGVtcGxhdGVzLycgKyB1cmk7XG4gIH1cblxuICBmdW5jdGlvbiBsYXp5TG9hZCgpIHtcbiAgICB2YXIgX2FyZ3MgPSBhcmd1bWVudHM7XG4gICAgcmV0dXJuIHtcbiAgICAgIGxhenlMb2FkOiBbJ1JvdGFzU2VydmljZScsIGZ1bmN0aW9uIChSb3Rhc1NlcnZpY2UpIHtcbiAgICAgICAgcmV0dXJuIFJvdGFzU2VydmljZS5sb2FkKF9hcmdzKTtcbiAgICAgIH1dXG4gICAgfTtcbiAgfVxuXG59KSgpO1xuIiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwLnVzdWFyaW8nKVxuICAgIC5jb25maWcocm90YXMpO1xuXG4gIHJvdGFzLiRpbmplY3QgPSBbJyR1cmxSb3V0ZXJQcm92aWRlcicsICckc3RhdGVQcm92aWRlciddO1xuXG4gIGZ1bmN0aW9uIHJvdGFzKCR1cmxSb3V0ZXJQcm92aWRlciwgJHN0YXRlUHJvdmlkZXIpe1xuICAgICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoXCIvXCIpO1xuICAgICRzdGF0ZVByb3ZpZGVyXG4gICAgICAuc3RhdGUoJ2FwcC51c3VhcmlvJywge1xuICAgICAgICB1cmw6IFwidXN1YXJpb1wiLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgIGNvbnRldWRvOiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogYmFzZXBhdGgoXCJ1c3VhcmlvL2xpc3RhclwiKSxcbiAgICAgICAgICAgIGNvbnRyb2xsZXI6ICdVc3VhcmlvQ29udHJvbGxlcicsXG4gICAgICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgICAgICByZXNvbHZlOiBsYXp5TG9hZCgnYXBwLnVzdWFyaW8nKVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSlcbiAgICAgIC5zdGF0ZSgnYXBwLnVzdWFyaW9DYWRhc3RyYXInLCB7XG4gICAgICAgIHVybDogXCJ1c3VhcmlvL2NhZGFzdHJhclwiLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgIGNvbnRldWRvOiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogYmFzZXBhdGgoXCJ1c3VhcmlvL2Zvcm1cIiksXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnVXN1YXJpb0NvbnRyb2xsZXInLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgcmVzb2x2ZTogbGF6eUxvYWQoJ2FwcC51c3VhcmlvJylcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuc3RhdGUoJ2FwcC51c3VhcmlvRWRpdGFyJywge1xuICAgICAgICB1cmw6IFwidXN1YXJpby9lZGl0YXIvOmlkVXN1YXJpb1wiLFxuICAgICAgICB2aWV3czoge1xuICAgICAgICAgIGNvbnRldWRvOiB7XG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogYmFzZXBhdGgoXCJ1c3VhcmlvL2Zvcm1cIiksXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnVXN1YXJpb0NvbnRyb2xsZXInLFxuICAgICAgICAgICAgY29udHJvbGxlckFzOiAndm0nLFxuICAgICAgICAgICAgcmVzb2x2ZTogbGF6eUxvYWQoJ2FwcC51c3VhcmlvJylcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gYmFzZXBhdGgodXJpKSB7XG4gICAgcmV0dXJuICcvYXBpL3RlbXBsYXRlcy8nICsgdXJpO1xuICB9XG5cbiAgZnVuY3Rpb24gbGF6eUxvYWQoKSB7XG4gICAgdmFyIF9hcmdzID0gYXJndW1lbnRzO1xuICAgIHJldHVybiB7XG4gICAgICBsYXp5TG9hZDogWydSb3Rhc1NlcnZpY2UnLCBmdW5jdGlvbiAoUm90YXNTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBSb3Rhc1NlcnZpY2UubG9hZChfYXJncyk7XG4gICAgICB9XVxuICAgIH07XG4gIH1cblxufSkoKTtcbiIsIihmdW5jdGlvbigpe1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbmZpZyhyb3Rhcyk7XG5cbiAgcm90YXMuJGluamVjdCA9IFsnJHVybFJvdXRlclByb3ZpZGVyJywgJyRzdGF0ZVByb3ZpZGVyJ107XG5cbiAgZnVuY3Rpb24gcm90YXMoJHVybFJvdXRlclByb3ZpZGVyLCAkc3RhdGVQcm92aWRlcil7XG4gICAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZShcIi9pbmljaW9cIik7XG4gICAgJHN0YXRlUHJvdmlkZXJcbiAgICAgIC5zdGF0ZSgnYXBwJywge1xuICAgICAgICB1cmw6IFwiL1wiLFxuICAgICAgICBhYnN0cmFjdDogdHJ1ZSxcbiAgICAgICAgY29udHJvbGxlcjogJ0FwcENvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHRlbXBsYXRlVXJsOiBiYXNlcGF0aChcInByaW5jaXBhbFwiKSxcbiAgICAgICAgcmVzb2x2ZTogYXV0ZW50aWNhcigpXG4gICAgICB9KVxuICAgICAgLnN0YXRlKCdhcHAuaW5pY2lvJywge1xuICAgICAgICB1cmw6IFwiaW5pY2lvXCIsXG4gICAgICAgIHRlbXBsYXRlOiAnPGgxPkluaWNpbzwvaDE+J1xuICAgICAgfSlcbiAgICAgIC5zdGF0ZSgnbG9naW4nLCB7XG4gICAgICAgIHVybDogXCIvbG9naW5cIixcbiAgICAgICAgdGVtcGxhdGVVcmw6IGJhc2VwYXRoKFwibG9naW5cIiksXG4gICAgICAgIGNvbnRyb2xsZXI6ICdMb2dpbkNvbnRyb2xsZXInLFxuICAgICAgICBjb250cm9sbGVyQXM6ICd2bScsXG4gICAgICAgIHJlc29sdmU6IGxhenlMb2FkKCdhcHAudXN1YXJpbycpXG4gICAgICB9KVxuICAgICAgLnN0YXRlKCdyZWdpc3RyYXInLCB7XG4gICAgICAgIHVybDogXCIvcmVnaXN0cmFyXCIsXG4gICAgICAgIHRlbXBsYXRlVXJsOiBiYXNlcGF0aChcInJlZ2lzdHJhclwiKSxcbiAgICAgICAgY29udHJvbGxlcjogJ0xvZ2luQ29udHJvbGxlcicsXG4gICAgICAgIGNvbnRyb2xsZXJBczogJ3ZtJyxcbiAgICAgICAgcmVzb2x2ZTogbGF6eUxvYWQoJ2FwcC51c3VhcmlvJylcbiAgICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gYmFzZXBhdGgodXJpKSB7XG4gICAgcmV0dXJuICcvYXBpL3RlbXBsYXRlcy8nICsgdXJpO1xuICB9XG5cbiAgZnVuY3Rpb24gbGF6eUxvYWQoKSB7XG4gICAgdmFyIF9hcmdzID0gYXJndW1lbnRzO1xuICAgIHJldHVybiB7XG4gICAgICBsYXp5TG9hZDogWydSb3Rhc1NlcnZpY2UnLCBmdW5jdGlvbiAoUm90YXNTZXJ2aWNlKSB7XG4gICAgICAgIHJldHVybiBSb3Rhc1NlcnZpY2UubG9hZChfYXJncyk7XG4gICAgICB9XVxuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBhdXRlbnRpY2FyKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhdXRlbnRpY2FyOiBbJyR3aW5kb3cnLCAnJGxvY2F0aW9uJywgZnVuY3Rpb24oJHdpbmRvdywgJGxvY2F0aW9uKSB7XG4gICAgICAgIGlmICghJHdpbmRvdy5sb2NhbFN0b3JhZ2UudG9rZW4pIHtcbiAgICAgICAgICAkbG9jYXRpb24ucGF0aCgnL2xvZ2luJyk7XG4gICAgICAgIH1cbiAgICAgIH1dXG4gICAgfTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuY29udHJvbGxlcignQXBwQ29udHJvbGxlcicsIGFwcENvbnRyb2xsZXIpO1xuXG4gIGFwcENvbnRyb2xsZXIuJGluamVjdCA9IFsnJG1kU2lkZW5hdiddO1xuXG4gIGZ1bmN0aW9uIGFwcENvbnRyb2xsZXIoJG1kU2lkZW5hdil7XG4gICAgLyoganNoaW50IHZhbGlkdGhpczogdHJ1ZSAqL1xuICAgIHZhciB2bSA9IHRoaXM7XG5cbiAgICB2bS5tb3N0cmFyTWVudSA9IG1vc3RyYXJNZW51O1xuXG4gICAgZnVuY3Rpb24gbW9zdHJhck1lbnUoKXtcbiAgICAgICRtZFNpZGVuYXYoJ21lbnVQcmluY2lwYWwnKVxuICAgICAgICAudG9nZ2xlKClcbiAgICAgICAgLnRoZW4oZnVuY3Rpb24oKXtcblxuICAgICAgICB9KTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCl7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyXG4gICAgLm1vZHVsZSgnYXBwJylcbiAgICAuZmFjdG9yeSgnSW50ZXJjZXB0YWRvcicsIGludGVyY2VwdGFkb3IpO1xuXG4gIGludGVyY2VwdGFkb3IuJGluamVjdCA9IFtcIiRxXCIsIFwiJHdpbmRvd1wiLCBcIiRsb2NhdGlvblwiLCBcInRvYXN0ZXJcIl07XG5cbiAgZnVuY3Rpb24gaW50ZXJjZXB0YWRvcigkcSwgJHdpbmRvdywgJGxvY2F0aW9uLCB0b2FzdGVyKSB7XG5cbiAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgIHJlcXVlc3QgICAgICAgOiByZXF1ZXN0LFxuICAgICAgcmVzcG9uc2VFcnJvciA6IHJlc3BvbnNlRXJyb3JcbiAgICB9O1xuXG4gICAgcmV0dXJuIHNlcnZpY2U7XG5cbiAgICBmdW5jdGlvbiByZXF1ZXN0KGNvbmZpZykge1xuICAgICAgY29uZmlnLmhlYWRlcnMgPSBjb25maWcuaGVhZGVycyB8fCB7fTtcbiAgICAgIGlmICgkd2luZG93LmxvY2FsU3RvcmFnZS50b2tlbikge1xuICAgICAgICBjb25maWcuaGVhZGVyc1snQXV0aG9yaXphdGlvbiddID0gJ0JlYXJlciAnKyAkd2luZG93LmxvY2FsU3RvcmFnZS50b2tlbjtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjb25maWc7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzcG9uc2VFcnJvcihyZXNwb25zZSkge1xuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgICRsb2NhdGlvbi5wYXRoKCcvbG9naW4nKTtcbiAgICAgICAgdG9hc3Rlci5wb3AoJ2Vycm9yJywgXCJFcnJvIVwiLCByZXNwb25zZS5kYXRhLm1lbnNhZ2VtKTtcbiAgICAgIH1cbiAgICAgIHRvYXN0ZXIucG9wKCdlcnJvcicsIFwiT2NvcnJldSB1bSBFcnJvXCIsIHJlc3BvbnNlLmRhdGEubWVuc2FnZW0pO1xuICAgICAgcmV0dXJuICRxLnJlamVjdChyZXNwb25zZS5kYXRhLm1lbnNhZ2VtKTtcbiAgICB9XG4gIH1cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgYW5ndWxhclxuICAgIC5tb2R1bGUoJ2FwcCcpXG4gICAgLmNvbnRyb2xsZXIoJ0xvZ2luQ29udHJvbGxlcicsIGxvZ2luQ29udHJvbGxlcik7XG5cbiAgbG9naW5Db250cm9sbGVyLiRpbmplY3QgPSBbJyRodHRwJywgJyR3aW5kb3cnLCAnJHN0YXRlJywgJ1VzdWFyaW9Nb2RlbCcsJ05vdGlmaWNhY2FvJ107XG5cbiAgZnVuY3Rpb24gbG9naW5Db250cm9sbGVyKCRodHRwLCAkd2luZG93LCAkc3RhdGUsIFVzdWFyaW9Nb2RlbCwgTm90aWZpY2FjYW8pe1xuICAgIC8qIGpzaGludCB2YWxpZHRoaXM6IHRydWUgKi9cbiAgICB2YXIgdm0gPSB0aGlzO1xuXG4gICAgdm0ubG9nYXIgID0gbG9nYXI7XG4gICAgdm0uc2FsdmFyVXN1YXJpbyAgID0gc2FsdmFyVXN1YXJpbztcblxuICAgIE5vdGlmaWNhY2FvLmFkZEV2ZW50TGlzdGVuZXIoJ3VzdWFyaW86Y3JlYXRlX3N1Y2Nlc3MnLCBmdW5jdGlvbihldmVudCwgZGF0YSkgeyBfY3JlYXRlLnN1Y2Nlc3MoZGF0YSk7ICB9KTtcbiAgICBOb3RpZmljYWNhby5hZGRFdmVudExpc3RlbmVyKCd1c3VhcmlvOmNyZWF0ZV9lcnJvcicsIGZ1bmN0aW9uKGV2ZW50LCBkYXRhKSB7IF9jcmVhdGUuZXJyb3IoZGF0YSk7IH0pO1xuXG4gICAgZnVuY3Rpb24gbG9nYXIodXN1YXJpbyl7XG4gICAgICAkaHR0cFxuICAgICAgICAucG9zdCgnLi9hcGkvYXV0ZW50aWNhY2FvJywgdXN1YXJpbylcbiAgICAgICAgLnN1Y2Nlc3MoZnVuY3Rpb24gKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKSB7XG4gICAgICAgICAgJHdpbmRvdy5sb2NhbFN0b3JhZ2UudG9rZW4gPSBkYXRhLnRva2VuO1xuICAgICAgICAgICRzdGF0ZS5nbygnYXBwLmluaWNpbycpO1xuICAgICAgICB9KVxuICAgICAgICAuZXJyb3IoZnVuY3Rpb24gKGRhdGEsIHN0YXR1cywgaGVhZGVycywgY29uZmlnKSB7XG4gICAgICAgICAgLy8gRXJhc2UgdGhlIHRva2VuIGlmIHRoZSB1c2VyIGZhaWxzIHRvIGxvZyBpblxuICAgICAgICAgIGRlbGV0ZSAkd2luZG93LmxvY2FsU3RvcmFnZS50b2tlbjtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2FsdmFyVXN1YXJpbyh1c3VhcmlvKSB7XG4gICAgICBVc3VhcmlvTW9kZWwuY3JlYXRlKHVzdWFyaW8pO1xuICAgIH1cblxuICAgIHZhciBfY3JlYXRlID0ge1xuICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICB2bS5tZXNzYWdlID0gJ1VzdcOhcmlvIGNyaWFkbyBjb20gc3VjZXNzbyc7XG4gICAgICAgICRzdGF0ZS5nbygnbG9naW4nKTtcbiAgICAgIH0sXG4gICAgICBlcnJvcjogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICB2bS5tZXNzYWdlID0gZGF0YS5tZXNzYWdlO1xuICAgICAgICBjb25zb2xlLndhcm4oZGF0YSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKXtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5mYWN0b3J5KCdOb3RpZmljYWNhbycsIG5vdGlmaWNhY2FvKTtcblxuICBmdW5jdGlvbiBub3RpZmljYWNhbygpIHtcbiAgICB2YXIgX2xpc3RlbmVycyA9IHt9O1xuXG4gICAgdmFyIHNlcnZpY2UgPSB7XG4gICAgICBfbGlzdGVuZXJzICAgICAgICAgIDogX2xpc3RlbmVycyxcbiAgICAgIGFkZEV2ZW50TGlzdGVuZXIgICAgOiBhZGRFdmVudExpc3RlbmVyLFxuICAgICAgbm90aWZ5ICAgICAgICAgICAgICA6IG5vdGlmeSxcbiAgICAgIHJlbW92ZUV2ZW50TGlzdGVuZXIgOiByZW1vdmVFdmVudExpc3RlbmVyXG4gICAgfTtcblxuICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgLyoqXG4gICAgICogQWRpY2lvbmEgdW0gbGlzdGVuZXJcbiAgICAgKiBAcGFyYW0gbmFtZSA6IE5vbWUgZG8gZXZlbnRvXG4gICAgICogQHBhcmFtIGxpc3RlbmVyIDogTGlzdGVuZXIgY2FsbGJhY2tcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBhZGRFdmVudExpc3RlbmVyKG5hbWUsbGlzdGVuZXIpIHtcbiAgICAgIGlmKCFfbGlzdGVuZXJzW25hbWVdKXtcbiAgICAgICAgX2xpc3RlbmVyc1tuYW1lXSA9IFtdO1xuICAgICAgfVxuICAgICAgX2xpc3RlbmVyc1tuYW1lXS5wdXNoKGxpc3RlbmVyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgdW0gbGlzdGVuZXJcbiAgICAgKiBAcGFyYW0gbmFtZSA6IE5vbWUgZG8gZXZlbnRvXG4gICAgICogQHBhcmFtIGxpc3RlbmVyIDogTGlzdGVuZXIgY2FsbGJhY2tcbiAgICAgKi9cbiAgICBmdW5jdGlvbiByZW1vdmVFdmVudExpc3RlbmVyKG5hbWUsbGlzdGVuZXIpIHtcbiAgICAgIGlmKF9saXN0ZW5lcnNbbmFtZV0pe1xuICAgICAgICB2YXIgaW5kZXggPSBfbGlzdGVuZXJzW25hbWVdLmluZGV4T2YobGlzdGVuZXIpO1xuXG4gICAgICAgIGlmKGluZGV4IT09LTEpe1xuICAgICAgICAgIF9saXN0ZW5lcnNbbmFtZV0uc3BsaWNlKGluZGV4LDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogTm90aWZpY2EgdW0gZXZlbnRvXG4gICAgICogQHBhcmFtIE11dGlwbG9zIHBhcsOibWV0cm9zIGRpc3BvbsOtdmVpcywgbyBwcmltZWlybyBkZXZlIHNlciB1bWEgc3RyaW5nXG4gICAgICovXG4gICAgZnVuY3Rpb24gbm90aWZ5KCkge1xuICAgICAgdmFyIGxpc3RlbmVycztcblxuICAgICAgaWYgKHR5cGVvZiBhcmd1bWVudHNbMF0gIT09ICdzdHJpbmcnKXtcbiAgICAgICAgY29uc29sZS53YXJuKCdOb3RpZmljYXRpb24nLCdQcmltZWlybyBwYXLDom1ldHJvIGRldmUgc2VyIHVtIG5vbWUgZGUgZXZlbnRvIChTdHJpbmcpJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaXN0ZW5lcnMgPSBfbGlzdGVuZXJzW2FyZ3VtZW50c1swXV07XG5cbiAgICAgICAgZm9yKHZhciBrZXkgaW4gbGlzdGVuZXJzKXtcbiAgICAgICAgICBsaXN0ZW5lcnNba2V5XS5hcHBseShudWxsLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59KSgpOyIsIihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXJcbiAgICAubW9kdWxlKCdhcHAnKVxuICAgIC5zZXJ2aWNlKCdSb3Rhc1NlcnZpY2UnLCByb3Rhc1NlcnZpY2UpO1xuXG4gIHJvdGFzU2VydmljZS4kaW5qZWN0ID0gWyckb2NMYXp5TG9hZCcsJyRxJywgJ0FQUF9DT05GSUcnXTtcblxuICBmdW5jdGlvbiByb3Rhc1NlcnZpY2UoJG9jTEwsICRxLCBhcHBDb25maWcpIHtcblxuICAgIHZhciBtb2R1bG9zID0gYXBwQ29uZmlnLm1vZHVsb3M7XG4gICAgdmFyIHNjcmlwdHMgPSBhcHBDb25maWcuc2NyaXB0cztcblxuICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgbG9hZCAgOiBsb2FkXG4gICAgfTtcblxuICAgIHJldHVybiBzZXJ2aWNlO1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICBmdW5jdGlvbiBsb2FkKF9hcmdzKSB7XG4gICAgICB2YXIgcHJvbWlzZSA9ICRxLndoZW4oMSk7IC8vIGVtcHR5IHByb21pc2VcbiAgICAgIGZvcih2YXIgaT0wLCBsZW49X2FyZ3MubGVuZ3RoOyBpIDwgbGVuOyBpICsrKXtcbiAgICAgICAgcHJvbWlzZSA9IGFuZFRoZW4oX2FyZ3NbaV0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHByb21pc2U7XG5cbiAgICAgIC8vIGNyZWF0ZXMgcHJvbWlzZSB0byBjaGFpbiBkeW5hbWljYWxseVxuICAgICAgZnVuY3Rpb24gYW5kVGhlbihfYXJnKSB7XG4gICAgICAgIC8vIGFsc28gc3VwcG9ydCBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHByb21pc2VcbiAgICAgICAgaWYodHlwZW9mIF9hcmcgPT0gJ2Z1bmN0aW9uJyl7XG4gICAgICAgICAgcmV0dXJuIHByb21pc2UudGhlbihfYXJnKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gcHJvbWlzZS50aGVuKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgLy8gaWYgaXMgYSBtb2R1bGUsIHBhc3MgdGhlIG5hbWUuIElmIG5vdCwgcGFzcyB0aGUgYXJyYXlcbiAgICAgICAgICAgIHZhciB3aGF0VG9Mb2FkID0gZ2V0UmVxdWlyZWQoX2FyZyk7XG4gICAgICAgICAgICAvLyBzaW1wbGUgZXJyb3IgY2hlY2tcbiAgICAgICAgICAgIGlmKCF3aGF0VG9Mb2FkKSB7XG4gICAgICAgICAgICAgIHJldHVybiAkLmVycm9yKCdSb3V0ZSByZXNvbHZlOiBCYWQgcmVzb3VyY2UgbmFtZSBbJyArIF9hcmcgKyAnXScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gZmluYWxseSwgcmV0dXJuIGEgcHJvbWlzZVxuICAgICAgICAgICAgcmV0dXJuICRvY0xMLmxvYWQoIHdoYXRUb0xvYWQgKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gY2hlY2sgYW5kIHJldHVybnMgcmVxdWlyZWQgZGF0YVxuICAgICAgLy8gYW5hbHl6ZSBtb2R1bGUgaXRlbXMgd2l0aCB0aGUgZm9ybSBbbmFtZTogJycsIGZpbGVzOiBbXV1cbiAgICAgIC8vIGFuZCBhbHNvIHNpbXBsZSBhcnJheSBvZiBzY3JpcHQgZmlsZXMgKGZvciBub3QgYW5ndWxhciBqcylcbiAgICAgIGZ1bmN0aW9uIGdldFJlcXVpcmVkKG5hbWUpIHtcbiAgICAgICAgaWYgKG1vZHVsb3Mpe1xuICAgICAgICAgIGZvcih2YXIgbSBpbiBtb2R1bG9zKXtcbiAgICAgICAgICAgIGlmKG1vZHVsb3NbbV0ubmFtZSAmJiBtb2R1bG9zW21dLm5hbWUgPT09IG5hbWUpe1xuICAgICAgICAgICAgICByZXR1cm4gbW9kdWxvc1ttXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNjcmlwdHMgJiYgc2NyaXB0c1tuYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn0pKCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=